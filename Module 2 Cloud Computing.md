## Module 2: Cloud Computing

## Amazon EC2

### Amazon Elastic Compute Cloud

- 안전하고 크기 조정이 가능한 컴퓨팅 용량을 클라우드상에서 제공

### 온프레미스 리소스와의 비교

- 온프레미스
  - 미리 하드웨어를 구매
  - 서버가 설치될 때까지 대기해야한다.
  - 물리적 데이터 센터에 서버를 설치해야한다.
  - 필요한 모든 인프라 구성을 수행해야 한다.
- EC2 인스턴스를 사용하는 경우
  - 몇 분이면 EC2 인스턴스를 프로비저닝할 수 있다.
  - 워크로드 실행을 완료할 때 인스턴스 사용을 중지할 수 있다.
  - 실행 중일 때 사용한 컴퓨팅 시간에 대해서만 비용을 지불한다.
  - 필요한 서버 용량에 대해서만 비용을 지불하므로 비용을 절감할 수 있다.

### Amazon EC2 작동 방식

#### 시작

- 먼저 인스턴스를 시작한다.
  - 기본 구성 인스턴스가 포함되어 있는 템플릿을 선택한다.
  - 이 구성에는 운영체제, 애플리케이션 서버 혹은 애플리케이션이 포함된다.
- 인스턴스의 유형(하드웨어 구성)을 선택한다.

- 인스턴스로 들어오고 나가는 네트워크 트래픽을 제어할 보안 설정을 지정한다.

#### 연결

- 인스턴스에 연결한다
  - 프로그램과 애플리케이션을 연결하는 방법
  - 인스턴스에 직접 연결하고 데이터를 교환하는 방법
- 사용자가 로그인하여 인스턴스에 연결하고 컴퓨터 데스크톱에 액세스한다.

#### 사용

- 인스턴스에 연결 시 바로 사용할 수 있다.
- 명령을 실행하여 여러가지 작업을 수행할 수 있다.
  - 소프트웨어 설치
  - 스토리치 추가
  - 파일 복사 및 정리

### Amazon EC2 인스턴스 유형

인스턴스 유형을 선택할 때 워크로드 및 애플리케이션의 구체적 요구사항을 고려한다.

컴퓨팅, 메모리 또는 스토리지 기능에 대한 요구사항이 포함된다.

#### 범용 인스턴스

범용 인스턴스는 컴퓨팅, 메모리, 네트워킹 리소스를 균형있게 제공

다음과 같은 워크로드에 사용할 수 있다.

- 애플리케이션 서버
- 게임 서버
- 엔터프라이즈 애플리케이션용 백엔드 서버
- 중소 규모 데이터베이스

- 컴퓨팅, 메모리, 네트워킹에 필요한 리소스가 거의 동일한 애플리케이션의 경우
  - 어느 한 리소스 영역에 대한 최적화가 필요하지 않다

#### 컴퓨팅 최적화 인스턴스

- 고성능 프로세서를 활용하는 애플리케이션에 적합

- 고성능 웹 서버, 컴퓨팅 집약적 애플리케이션 서버 및 게임 전용 서버에 적합
- 단일 그룹에서 많은 트랜잭션을 처리해야 하는 일괄 처리 워크로드에 사용

#### 메모리 최적화 인스턴스

- 메모리에서 대규모 데이터 세트를 처리하는 워크로드에 적합
- 애플리케이션을 실행하기 전에 많은 데이터를 미리 로드해야 하는 워크로드
- 고성능 데이터베이스의 경우
- 방대한 양의 비정형 데이터의 실시간 처리가 필요한 워크로드

#### 엑셀러레이티드 컴퓨팅 인스턴스

- 그래픽카드 쓰는 경우라고 생각하자

- 하드웨어 엑셀러레이터 또는 코프로세서를 사용하는 컴퓨팅 인스턴스
- CPU에서 실행되는 소프트웨어보다 효율적으로 수행할 수 있는 워크로드가 존재
- 부동 소수점 수 계산, 그래픽 처리, 데이터 패턴 일치
- 데이터 처리를 가속화할 수 있는 경우
- 그래픽 애플리케이션, 게임 스트리밍, 애플리케이션 스트리밍

#### 스토리지 최적화 인스턴스

- 로컬 스토리지의 대규모 데이터 세트에 대한 순차적 읽기 쓰기 액세스가 필요한 워크로드
- 분산 파일 시스템, 데이터 웨어하우징 애플리케이션, 고빈도 온라인 트랜잭션 처리(OLTP)
- 지연시간이 짧은 임의 IOPS를 애플리케이션에 제공



### Amazon EC2 요금

#### 온디맨드

- 중단이 불가능하지만, 불규칙한 단기 워크로드의 경우
- 선결제 비용이나 최소 약정이 적용되지 않음
- 인스턴스는 중지될 때까지 실행되지만, 사용한 컴퓨팅 시간에 대해서만 비용을 지불
- 장기적으로 사용할 워크로드인 경우 예약 인스턴스를 사용하는 것이 훨씬 저렴하다.

#### Amazon EC2 Saving Plans

- 1년 또는 3년 기간 동안 일정한 컴퓨팅 사용량을 약정하여 컴퓨팅 비용을 절감할 수 있다.
- 온디맨드 요금에 비해 최대 72%정도까지
- 약정을 초과한 사용량에 대해서는 일반 온디맨드 요금이 부과
- AWS Cost Explorer
  - AWS 비용 및 사용량을 시각화, 이해 및 관리할 수 있는 도구
  - Saving Plans의 시간당 약정 금액을 기준으로 EC2 사용 절감 비용을 계산하고 권장사항을 제공한다.

#### 예약 인스턴스

- 꾸준한 상태의 워크로드나 사용량이 예측 가능한 워크로드에 적합
- 1년 또는 3년을 약정하여 할인 (75%까지 비용을 절감)
- 전액 선결제 / 부분 선결제 / 선결제 없음 옵션이 존재

#### 스팟 인스턴스

- 시작 및 중단이 자유로운 워크로드에 적합

- 온디맨드의 최대 90%까지 비용을 절감

- 컴퓨팅 사용량에 대한 약정이 필요하지 않음

- 필요에 따라 시작 및 중지할 수 있는 백그라운드 처리 작업

  - 배치 워크로드
  - 고객 설문 조사 데이터 처리 작업

- 전반적인 서비스 운영에는 영향을 주지 않는 작업

  

#### 전용 호스트

- 사용자 전용의 EC2 인스턴스
  - 보통 규정 준수 요구 사항을 충족하는데 사용
  - 호스트의 테넌시를 다른 사람과 공유하지 않음
- 가장 비용이 많이 듬



### Amazon EC2 Auto Scaling

#### 확장성

- 필요한 리소스만으로 시작
- 수요 변화에 따라 자동으로 확장 및 축소
  - 사용한 리소스에 대해서만 비용을 지불
  - 동적 조정
    - 수요 변화에 대응
  - 예측 조정
    - 예측된 수요에 따라 적절하게 자동으로 예약

#### Auto Scaling 그룹 설정방법

- 최소 용량
  - Auto scaling 그룹 생성 시 최소 Amazon EC2 인스턴스 수
- 희망 용량 (?)
  - 희망하는 Auto scaling EC2 인스턴스 수
- 최대 용량
  - 수요 증가에 대해 Auto Scaling을 하되 제한할 최대 인스턴스 수